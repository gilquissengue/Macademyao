<!DOCTYPE html>
<html lang="pt">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login - Money Academy</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: Arial, sans-serif;
      }
      body {
        display: flex;
        height: 100vh;
        align-items: center;
        justify-content: center;
        background: #fff;
      }
      .container {
        display: flex;
        width: 80%;
        max-width: 900px;
        background: #fff;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        border-radius: 8px;
        overflow: hidden;
      }
      .left {
        background: linear-gradient(135deg, #e85d04, #fb8500);
        color: white;
        padding: 40px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        flex: 1;
      }
      .left h2 {
        margin-bottom: 10px;
      }
      .left p {
        text-align: center;
        margin-bottom: 20px;
      }
      .left button {
        background: transparent;
        border: 2px solid white;
        color: white;
        padding: 10px 20px;
        border-radius: 20px;
        cursor: pointer;
      }
      .left button:hover {
        background: white;
        color: #e85d04;
      }
      .right {
        padding: 40px;
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }
      .input-group {
        width: 100%;
        margin-bottom: 15px;
        position: relative;
      }
      .input-group label {
        display: block;
        margin-bottom: 5px;
        color: #333;
      }
      .input-group input {
        width: 100%;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
      }
      .toggle-password {
        position: absolute;
        right: 10px;
        top: 35px;
        cursor: pointer;
      }
      .button {
        width: 100%;
        padding: 10px;
        background: linear-gradient(135deg, #e85d04, #fb8500);
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        transition: background 0.3s ease;
      }
      .button:hover {
        background: linear-gradient(135deg, #fb8500, #e85d04);
      }
      .link {
        margin-top: 10px;
        font-size: 14px;
      }
      .link a {
        color: #e85d04;
        text-decoration: none;
        font-weight: bold;
      }
      .link a p {
        text-align: center;
      }
      .error-message {
        color: red;
        font-size: 14px;
        margin-top: 5px;
        display: none;
      }
      @media (max-width: 768px) {
        .container {
          flex-direction: column;
        }
        .left {
          display: none;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="left">
        <h2>Estude sem sair de casa!</h2>
        <p>
          Milhares de pessoas j√° est√£o aqui. Fa√ßa login e descubra um mundo de
          possibilidades.
        </p>
        <a href="registrar.html"><button>Criar conta</button></a>
      </div>
      <div class="right">
        <div class="logo">
          <a href="index.html"><img src="favicon.png" alt="Logo" /></a>
        </div>
        <div class="input-group">
          <label for="email">E-mail</label>
          <input
            type="email"
            id="email"
            placeholder="Digite seu e-mail"
            required
          />
        </div>
        <div class="input-group">
          <label for="password">Senha</label>
          <input
            type="password"
            id="password"
            placeholder="Digite sua senha"
            required
            autocomplete="off"
          />
          <span class="toggle-password" onclick="togglePassword()">üëÅÔ∏è</span>
        </div>
        <p id="error-message" class="error-message"></p>
        <button class="button" id="login-btn">ENTRAR</button>
        <div class="link">
          <a href="password.html"><p>Esqueceu a senha?</p></a>
          <p>N√£o possui conta? <a href="registrar.html">Crie uma agora!</a></p>
        </div>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // Lista de emails autorizados que ter√£o acesso direto (sem duplicados)
        const allowedEmails = [
          "adonaisamuel@gmail.com",
          "afonsoadilson568@gmail.com",
          "afonsofaustino1424@gmail.com",
          "albertoselundo@gmail.com",
          "albuquerquesabina@gmail.com",
          "alexandropedrocapngala@gmail.com",
          "amaraldomingos55@gmail.com",
          "ameliasequesseque12@gmail.com",
          "anacletofrancisco06@gmail.com",
          "andersonrich330@gmail.com",
          "andradecutonda@gmail.com",
          "androdejesus93@gmail.com",
          "anitapedrocapngala@gmail.com",
          "antoniovontadev@gmail.com",
          "antoniopandelapindali@gmail.com",
          "helderfernando629@gmail.com",
          "senionuvens74@gmail.com",
          "artemisiamisia534@gmail.com",
          "aricleniobequessaariclenio@gmail.com",
          "auriosangabi@icloud.com",
          "aventurasdoventura@gmail.com",
          "azevedoluanda@gmail.com",
          "azevedomonizaz@gmail.com",
          "baptistacandumbu@gmail.com",
          "baptistadamiao35@gmail.com",
          "antoniobota339@gmail.com",
          "belarminacarlad@gmail.com",
          "beneditomodestok@gmail.com",
          "admalmildeb@gmail.com",
          "luizelo063@gmail.com",
          "ap9563966@gmail.com",
          "benjamimdesousa302@gmail.com",
          "bernardotwapita@gmeil.com",
          "caculorosario54@gmail.com",
          "cambigep@gmail.com",
          "ramirodejesusbumba@gmail.com",
          "macandijoaolandasanda@gmail.com",
          "gilbertoquissengue@gmail.com",
          "andresergio@gamail.com",
          "candidolupassa@gmail.com",
          "carlosassola@gmail.com",
          "carlosmac482@gmail.com",
          "abraaokindoki14@gmail.com",
          "leiroafonso2@gmail.com",
          "josekilala958@gmail.com",
          "marinelarita201@gmail.com",
          "ccahaxia242@gmail.com",
          "olimpia11dasilva@gmail.com",
          "andre@gmail.com",
          "muanzarachel1@gmail.com",
          "Josi71159@gmail.com",
          "cefora52@gmail.com",
          "celestinoalex111@gmail.com",
          "chanawollzey@gmail.com",
          "chanelnahenda8@gmail.com",
          "muanzarachel1@gmail.com",
          "chanafelicia5@gmail.com",
          "comte0217@gmail.com",
          "conceicaoabraao624@gmail.com",
          "criativogs@gmail.com",
          "cufabrunadecufa@gmail.com",
          "dadhivangolab@gmail.com",
          "daliasimaogarcia@gmail.com",
          "darioastrovibe@gmail.com",
          "darioedmilson41@gmail.com",
          "deolirquesagostinho1990@gmail.com",
          "deoliveirafilo6@gmail.com",
          "dg7205730@gmail.com",
          "dinhohossiantonio12@gmail.com",
          "dionisioween1920@gmail.com",
          "djimary20@gmail.com",
          "domingoscapengue01@gmail.com",
          "domingoscalei53@gmail.com",
          "domilsonsachimuma@gmail.com",
          "donanapaulobapti430@gmail.com",
          "dorcasnataniela24@gmail.com",
          "dulciomorzao@gmail.com",
          "ednesfela325@gmail.com",
          "eduardodiasbraganca044@gmail.com",
          "edusachinguarsolinha@gmail.com",
          "efraimfranck1@gmail.com",
          "elizabethngola023@gmail.com",
          "emilianasanjuel@gmail.com",
          "emilioamaralb97@gmail.com",
          "enoquesachicolamaliti@gmail.com",
          "erafaelelias184@gmail.com",
          "eriksongraca@gmail.com",
          "esteladiakenda@gmail.com",
          "adilson.s.v12@gmail.com",
          "vicentemartins023@gmail.com",
          "adilsonsergio@gmail.com",
          "constantinotravasso@gmail.com",
          "gabriel33sara@gmail.com",
          "netoaline866@gmail.com",
          "estefanialourencoe@gmail.com",
          "faustinopatricio7@icloud.com",
          "faustinoseque0@gmail.com",
          "fellvanza13@gmail.com",
          "feliciacandumbo52@gmail.com",
          "felisbertazuar@gmail.com",
          "fernandobino@gmail.com",
          "fernandocesar61@gmail.com",
          "fhclean1@gmail.com",
          "filhahelria@gmail.com",
          "filomenacortez0210@gmail.com",
          "firminotoni11@gmail.com",
          "flexalberto78@gmail.com",
          "franciscokialagoncalves94@gmail.com",
          "franciscosilva@gmail.com",
          "franciscoteca42@gmail.com",
          "francisco.a.gomes09@gmail.com",
          "gelsondavid443@gmail.com",
          "geraljgbragalda@gmail.com",
          "gracindaraimundo25@gmail.com",
          "gracieteluis0@gmail.com",
          "henriquescalei45@gmail.com",
          "hermenegildoa074@gmail.com",
          "honoriofragoso46@gmail.com",
          "idrissmonteiro19@gmail.com",
          "isaac@gmail.com",
          "jacobsoriano313@gmail.com",
          "joaocabinganopetelsonpedro@gmail.com",
          "joaodanielsimao344@gmail.com",
          "joaoeliassapaloelias@gmail.com",
          "joaojorgecontreira590@gmail.com",
          "joaomanuelvumbi@gmail.com",
          "joaomiguelnicolau92@gmail.com",
          "joaomoraisp78@gmail.com",
          "joanacamueleluis@gmail.com",
          "joaquimsegunda@gmail.com",
          "lucassuku@gmail.com",
          "juliana87gmael.com",
          "yolandavidro588@gmail.com",
          "neulinkgeral@gmail.com",
          "emanueltchicale@gmail.com",
          "virgiliocateeco5@gmail.com",
          "admalmildebaltazar@gmail.com",
          "paixaofranciscomartinho@gmail.com",
          "eugenia@gmail.com",
          "thomaslopes690@gmail.com",
          "josezau80@outlook.com",
          "josesimaojoseantonio@gmail.com",
          "josedinhohossi77gmail.com",
          "jrgmnlpereira@gmail.com",
          "amilton82@gamail.com",
          "jujuvivalda@gmail.com",
          "kavegaj081905@gmail.com",
          "kudimuena.augusto@gmail.com",
          "laurindobernardo76@gmail.com",
          "leticiafitela@gmail.com",
          "loimiramandell@gmail.com",
          "lumumbacanhanga@gmail.com",
          "luxocubanzamoreira@gmail.com",
          "madalenahossi99gmail.com",
          "madalenapaulo619@gmail.com",
          "jaimendakosomadi036@gmail.com",
          "rafaelruingunza@mail.com",
          "sebastiaobomba15@gmail.com",
          "mariofrancesballerman@gmail.com",
          "mariokamutaliramos@gmail.com",
          "marisoltchissengue9@icloud.com",
          "martavieira052005@gmail.com",
          "joaobaptistajb22@gmail.com",
          "geraldomateusgeraldo8@gmail.com",
          "mateusestevespedro22@gmail.com",
          "marcelinomanuel663@gmail.com",
          "messiassola19@gmail.com",
          "manueltchitomamateus@gmail.com",
          "kinhadaniel9@gmail.com",
          "micmc390@gmail.com",
          "mihfaustiny@gmail.com",
          "mirandasimaol2010@gmail.com",
          "moosecabila@gmail.com",
          "monalizagolden88@gmail.com",
          "morenogilson2024@gmail.com",
          "nganahskayh@gmail.com",
          "lyswenny@gmail.com",
          "ruicostamachado0@gmail.com",
          "pascoalandreandelson@gmail.com",
          "singlejoao0@icloud.com",
          "bethleenabraao370@gmail.com",
          "albanoanalia453@gmail.com",
          "rafaelruingunza@gmail.com",
          "gonganirva@gmail.com",
          "morena.leitao@icloud.com",
          "alexandrareis116@gmail.com",
          "vigariobumba3@gmail.com",
          "wilsoncahanda155@gmail.com",
          "paulopeezy143@gmail.com",
          "davidsilveiroandre@gmail.com",
          "davidmendonca444@gmail.com",
          "cardosolucineide567@gmail.com",
          "morenacondicoes98@gmail.com",
          "mulundojr@gmail.com",
          "buggani09@icloud.com",
          "mbaptista649@gmail.com",
          "caluandaagelson@gmail.com",
          "manuelmiguel@gmail.com",
          "mdonana738@gmail.com",
          "remosludmil@gmail.com",
          "aristotelukulu@gmail.com",
          "ndalaroberto850@gmail.com",
          "neididavid@gmail.com",
          "nzuzimbemba11@gmail.com",
          "osvaldofernando770@gmail.com",
          "pauloramiro223@icloud.com",
          "pedroraimundorosa06@gmail.com",
          "pedrocapolopc3@gmail.com",
          "pintoadriano2003@gmail.com",
          "ponda@gmel.com",
          "ravanelbernardo2@gmail.com",
          "ravionze11@gmail.com",
          "ronaldovuvu20@gmail.com",
          "nildodolle@gmail.com",
          "rosafontoura88@gmail.com",
          "ruthpitrazinga28@gmail.com",
          "ruthrockssana@gmail.com",
          "sanduvaafonso@gmail.com",
          "sebastiaoagostinholourenconeto@gmail.com",
          "serineujuliochico@gmail.com",
          "siprianopuati45@gmail.com",
          "silvestreandresf8@gmail.com",
          "silvioarsenio508@gmail.com",
          "singlejoao0@gmail.com",
          "vitoriaq844@gmail.com",
          "kacumbabless@gmail.com",
          "edsoncalvino20@gmail.com",
          "adelinocuanga@gmail.com",
          "mtassassis1020@gmail.com",
          "22ramirocelestino@gmail.com",
          "wilsonandreratos@gmail.com",
          "custodio_pereira@icloud.com",
          "sousasousamateus36@gmail.com",
          "skussumola@gmail.com",
          "Josimardala12@gmail.com",
          "tomascosta955@gmail.com",
          "danielafrancisco812@gmail.com",
          "sulcompanylda@gmail.com",
          "ricardootchiuale@gmail.com",
          "lucasquimq@gmail.com",
          "manuelponda@gmail.com",
          "bedacosta07@gmail.com",
          "tavares@gmail.com",
          "terencioprata@gmail.com",
          "urianminvopolen@gmail.com",
          "urieladonai91@gmail.com",
          "vencelauvieira@gmail.com",
          "veronicamiguellungo@gmail.com",
          "vinogario90@gmail.com",
          "vladimiromutekaao@gmail.com",
          "vundjap@gmail.com",
          "joaomandume9@gmail.com",
          "yanickmonet2025@gmail.com",
          "zagebento@hotmail.com",
          "zeneltonchicaia20@gmail.com",
          "kwamimondelane@gmail.com",
        ];
    
        // Normaliza a lista de e-mails permitidos para compara√ß√£o
        const normalizedAllowedEmails = [
          ...new Set(allowedEmails.map((email) => email.trim().toLowerCase())),
        ];
    
       
        document
          .getElementById("login-btn")
          .addEventListener("click", async (e) => {
            e.preventDefault();
            const email = document
              .getElementById("email")
              .value.trim()
              .toLowerCase();
            const password = document.getElementById("password").value;
            const errorElement = document.getElementById("error-message");
            errorElement.style.display = "none";

            // Valida√ß√£o b√°sica
            if (!email || !email.includes("@")) {
              errorElement.textContent = "‚ö†Ô∏è Digite um e-mail v√°lido";
              errorElement.style.display = "block";
              return;
            }

            // Valida√ß√£o de senha (exigir senha para qualquer usu√°rio)
            if (!password) {
              errorElement.textContent = "‚ö†Ô∏è Digite sua senha";
              errorElement.style.display = "block";
              return;
            }

            // Valida√ß√£o de comprimento m√≠nimo da senha (4 caracteres)
            if (password.length < 4) {
              errorElement.textContent =
                "‚ö†Ô∏è A senha deve ter pelo menos 4 caracteres";
              errorElement.style.display = "block";
              return;
            }

            // Verifica se o e-mail est√° na lista de permitidos
            if (normalizedAllowedEmails.includes(email)) {
              // Para e-mails autorizados, qualquer senha √© aceita, desde que tenha sido digitada

              // Simula um pequeno atraso para parecer que est√° verificando
              errorElement.textContent = "‚è≥ Verificando...";
              errorElement.style.display = "block";
              errorElement.style.color = "#e85d04"; // Cor laranja para indicar processamento

              setTimeout(() => {
                // Mostra mensagem de sucesso
                alert(
                  "‚úÖ Login realizado com sucesso!\n\nBem-vindo √† Money Academy."
                );

                // Configura persist√™ncia
                localStorage.setItem("authenticatedEmail", email);

                // Redireciona para o dashboard
                window.location.href = "dashboard.html";
              }, 1200);

              return;
            }

            // Se n√£o estiver na lista local, simula uma verifica√ß√£o na API
            try {
              errorElement.textContent = "‚è≥ Verificando...";
              errorElement.style.display = "block";
              errorElement.style.color = "#e85d04";

              let responseOk = false;

              try {
                const response = await fetch(
                  "https://macademy-api.onrender.com/auth/login",
                  {
                    method: "POST",
                    headers: {
                      "Content-Type": "application/json",
                      Accept: "application/json",
                    },
                    credentials: "include",
                    body: JSON.stringify({ email, password }),
                  }
                );

                const data = await response.json();
                responseOk = response.ok && data.success;

                if (responseOk) {
                  localStorage.setItem("authenticatedEmail", email);
                  alert(
                    "‚úÖ Login realizado com sucesso!\n\nBem-vindo √† Money Academy."
                  );
                  window.location.href = "dashboard.html";
                  return;
                }
              } catch (networkErr) {
                console.log("Verificando apenas autoriza√ß√£o local");
              }

              setTimeout(() => {
                errorElement.style.color = "red";
                errorElement.textContent =
                  "üîí Acesso n√£o autorizado. E-mail ou senha incorretos.";
                errorElement.style.display = "block";
              }, 1500);
            } catch (error) {
              setTimeout(() => {
                errorElement.style.color = "red";
                errorElement.textContent =
                  "üîí Acesso n√£o autorizado. Verifique suas credenciais.";
                errorElement.style.display = "block";
              }, 1500);
            }
          });

        // Fun√ß√£o para alternar a visibilidade da senha
        window.togglePassword = function () {
          const passwordInput = document.getElementById("password");
          const type =
            passwordInput.getAttribute("type") === "password"
              ? "text"
              : "password";
          passwordInput.setAttribute("type", type);
        };
      });
    </script>
  </body>
</html>
